use crate::utils::arrayX::ArrayX;
use crate::BigNum;
use crate::BigNumParamsTrait;
use crate::bignum_test::{
    test_mul, test_add, test_div, test_invmod, assert_is_not_equal, assert_is_not_equal_fail,
    assert_is_not_equal_overloaded_lhs_fail, assert_is_not_equal_overloaded_rhs_fail,
    assert_is_not_equal_overloaded_fail
};
use crate::mul::{schoolbook_mult, karatsuba_mult_13};

struct Test1555NonPrimeParams {}

impl BigNumParamsTrait<13> for Test1555NonPrimeParams {
  fn modulus() -> [Field; 13] {
    [1113333746925778117989290941319282813, 312069023125197152529363584632365550, 249939772470786581355913242054907764, 933210953877535618432691450900417369, 1187898306629608306726456438818408288, 303333794560777478527906585395556251, 191427491846640163720947121445039597, 471542483167834524032110448067759410, 16647307275233330465941796361731614, 246639610392189433898552578935052946, 1201983116357645251326391043553661519, 331250463240252161492623176642114980, 13966102169219236167310127190100284]
  }

  fn double_modulus() -> [Field; 13] {
    [897439498066640363074774822358221050, 624138046250394305058727169264731101, 499879544941573162711826484109815528, 537193911970155363961575841520490162, 1046568617474300740549105817356472001, 606667589121554957055813170791112503, 382854983693280327441894242890079194, 943084966335669048064220896135518820, 33294614550466660931883592723463228, 493279220784378867797105157870105892, 1074738236930374629748975026826978462, 662500926480504322985246353284229961, 27932204338438472334620254380200568]
  }

  fn redc_param() -> [Field; 13] {
    // floor(2^(2*1555) / p
    [977413512693962287050321990647484550, 249124781736856096582519408852204237, 77513203579889579799470353059379480, 468185642093769565828103936040539506, 937379308048406052920524141354835398, 86206747112050110864033569572890321, 475348750535657622205198708135457144, 110266453775667489703011102259751103, 372969013512619558850336362124566553, 912316031199380785352251162022089743, 840680201411400778708946863409082027, 577385724279200587380798695639383212, 123544605774146367051177807184148323]
  }

  fn modulus_bits() -> u64 {
    1555
  }

  fn mult(a: [Field; 13], b: [Field; 13]) -> ArrayX<Field, 13, 2> {
    karatsuba_mult_13(a, b)
  }
}
