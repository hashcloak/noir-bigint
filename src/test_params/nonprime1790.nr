use crate::utils::arrayX::ArrayX;
use crate::BigNum;
use crate::BigNumParamsTrait;
use crate::bignum_test::{
    test_mul, test_add, test_div, test_invmod, assert_is_not_equal, assert_is_not_equal_fail,
    assert_is_not_equal_overloaded_lhs_fail, assert_is_not_equal_overloaded_rhs_fail,
    assert_is_not_equal_overloaded_fail
};
use crate::mul::{schoolbook_mult, karatsuba_mult_15};

struct Test1790NonPrimeParams {}

impl BigNumParamsTrait<15> for Test1790NonPrimeParams {
  fn modulus() -> [Field; 15] {
    [747911080825702536784532552308151330, 742084973272568648417863592149549032, 614202453477241884571551528501565795, 30773796780651196038169834616696710, 1195861907047002581561208623879603720, 818873584733695607182528237594136586, 1208621979404948095145949943586295982, 339143335483855350739889063266744568, 103868027338073241719786675703731314, 779585375925767020101754487660725116, 302498742277253054726924978557553721, 476060396861691869530368341099337689, 795146236840781223899337769017624283, 1156775118956686573703858086938568198, 1074886581096201813766782706011252]
  }

  fn double_modulus() -> [Field; 15] {
    [166594165866489200665258044335958084, 154941950760221423931920124018753489, 1228404906954483769143103057003131591, 61547593561302392076339669233393420, 1062495818309089290218610187478862864, 308519173682475341461249414907928597, 1088015963024980317388092826892247389, 678286670967710701479778126533489137, 207736054676146483439573351407462628, 229942756066618167299701915041105656, 604997484554506109453849957115107443, 952120793723383739060736682198675378, 261064477896646574894868477754903990, 984322242128457274503909113596791821, 2149773162192403627533565412022505]
  }

  fn redc_param() -> [Field; 15] {
    // floor(2^(2*1790) / p
    [928903265934966853851723452012322079, 31067342685911845853504407887897040, 900833846707509272095252683469194367, 1289545655358633379249693683205458079, 681720180689947951484071104922455816, 1324530503744854638468301336161806808, 778490567135737051403120984933943998, 888447391932300351184001742195605003, 867502976679391732178846104414103327, 325558885155060728784745711825118636, 1150177745407051405585378493771682277, 340109290097579572005419757468937717, 622447903197692709020510654827385117, 889195110228975847941988253761299197, 1567604151294273739327518183626141]
  }

  fn modulus_bits() -> u64 {
    1790
  }

  fn mult(a: [Field; 15], b: [Field; 15]) -> ArrayX<Field, 15, 2> {
    karatsuba_mult_15(a, b)
  }
}
