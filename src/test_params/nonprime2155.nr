use crate::utils::arrayX::ArrayX;
use crate::BigNum;
use crate::BigNumParamsTrait;
use crate::bignum_test::{
    test_mul, test_add, test_div, test_invmod, assert_is_not_equal, assert_is_not_equal_fail,
    assert_is_not_equal_overloaded_lhs_fail, assert_is_not_equal_overloaded_rhs_fail,
    assert_is_not_equal_overloaded_fail
};
use crate::mul::schoolbook_mult;

struct Test2155NonPrimeParams {}

impl BigNumParamsTrait<18> for Test2155NonPrimeParams {
  fn modulus() -> [Field; 18] {
    [582304658203638523825584452188811839, 835647587368564996598029870770655441, 928321243074751104008767829632210934, 385874599708783280188615133727549540, 1310430134859101402839265250708867142, 1313773226971898682642656520441027811, 1029075999954359580186580346121014299, 708960328092001295636433539725117375, 977740937061536336079405971108208496, 1034979024313339480552471650249570135, 738202290082499077003029712253828515, 418603937705763228646417643989718540, 129201076386092221198506330653200806, 1181874284404592508842053668730244322, 651824573818161641279894184376177299, 996003440646505626224278774521455085, 609467319765424769475458534215924217, 18608344094198475483832078363918938]
  }

  // Note the most significant limb is 121 bits
  fn double_modulus() -> [Field; 18] {
    [1164609316407277047651168904377623678, 342067178952214120292252681260966306, 527414490364586335113728598984077293, 771749199417566560377230267455099081, 1291632273933286932774723441137389708, 1298318458158881492381505980601711047, 728924004123803287469353631961684023, 88692660399086718369060019169890175, 626253878338156799255004881936072417, 740730052841763088201136240218795695, 147176584380082281102252364227312455, 837207875411526457292835287979437081, 258402152772184442397012661306401612, 1034520573024269144780300277180144068, 1303649147636323282559788368752354599, 662778885508095379544750488762565594, 1218934639530849538950917068431848435, 37216688188396950967664156727837876]
  }

  // Note the most significant limb is 121 bits
  fn redc_param() -> [Field; 18] {
    [1014179133095857617755090661630429580, 16987506278715089371298474816238774, 1125120899550857458706971147724560441, 790433334481355082745529631350930461, 847007034209698637436821376185602291, 763421871276977308686629399838338230, 733426548235404626516681483771185665, 1196153075761868602968092326762170905, 104428258201693886008654374398480202, 851100997334151120744680259068077353, 1087760915589470562014082883785558116, 429195767212455983490558778834119737, 918484922716641603520139355776433059, 434936580488744183876540507826408490, 517907241083844463456877376231787169, 212520314423828369371180964232883449, 1133166477129521879921259696881961563, 370895245264855224048061734530268571]
  }

  fn modulus_bits() -> u64 {
    2155
  }

  fn mult(a: [Field; 18], b: [Field; 18]) -> ArrayX<Field, 18, 2> {
    schoolbook_mult(a, b)
  }
}
